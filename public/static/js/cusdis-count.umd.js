!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).CUSDIS_COUNT={})}(this,(function(e){"use strict";var t=function e(t){function n(e,t,r){var a,o={};if(Array.isArray(e))return e.concat(t);for(a in e)o[r?a.toLowerCase():a]=e[a];for(a in t){var i=r?a.toLowerCase():a,s=t[a];o[i]=i in o&&"object"==typeof s?n(o[i],s,"headers"===i):s}return o}function r(e,r,a,o){"string"!=typeof e&&(e=(r=e).url);var i={config:r},s=n(t,r),u={},c=o||s.data;(s.transformRequest||[]).map((function(e){c=e(c,s.headers)||c})),c&&"object"==typeof c&&"function"!=typeof c.append&&(c=JSON.stringify(c),u["content-type"]="application/json");var d="undefined"!=typeof document&&document.cookie.match(RegExp("(^|; )"+s.xsrfCookieName+"=([^;]*)"));if(d&&(u[s.xsrfHeaderName]=d[2]),s.auth&&(u.authorization=s.auth),s.baseURL&&(e=e.replace(/^(?!.*\/\/)\/?(.*)$/,s.baseURL+"/$1")),s.params){var f=~e.indexOf("?")?"&":"?";e+=f+(s.paramsSerializer?s.paramsSerializer(s.params):new URLSearchParams(s.params))}return(s.fetch||fetch)(e,{method:a||s.method,body:c,headers:n(s.headers,u,!0),credentials:s.withCredentials?"include":"same-origin"}).then((function(e){for(var t in e)"function"!=typeof e[t]&&(i[t]=e[t]);var n=s.validateStatus?s.validateStatus(e.status):e.ok;return"stream"==s.responseType?(i.data=e.body,i):e[s.responseType||"text"]().then((function(e){i.data=e,i.data=JSON.parse(e)})).catch(Object).then((function(){return n?i:Promise.reject(i)}))}))}return t=t||{},r.request=r,r.get=function(e,t){return r(e,t,"get")},r.delete=function(e,t){return r(e,t,"delete")},r.head=function(e,t){return r(e,t,"head")},r.options=function(e,t){return r(e,t,"options")},r.post=function(e,t,n){return r(e,n,"post",t)},r.put=function(e,t,n){return r(e,n,"put",t)},r.patch=function(e,t,n){return r(e,n,"patch",t)},r.all=Promise.all.bind(Promise),r.spread=function(e){return function(t){return e.apply(this,t)}},r.CancelToken="function"==typeof AbortController?AbortController:Object,r.defaults=t,r.create=e,r}();async function n(){const e=document.currentScript||document.querySelector("#for-testing"),{appId:n,host:r}=e.dataset,a=r||"https://cusdis.com",o=document.querySelectorAll("*[data-cusdis-count-page-id]"),i=Array.from(o).map((e=>e.dataset.cusdisCountPageId)),s=await t.get(`${a}/api/open/project/${n}/comments/count`,{params:{pageIds:i}});Array.from(o).forEach((e=>{e.innerHTML=s.data.data[e.dataset.cusdisCountPageId]}))}n(),e.initial=n,Object.defineProperty(e,"__esModule",{value:!0}),e[Symbol.toStringTag]="Module"}));